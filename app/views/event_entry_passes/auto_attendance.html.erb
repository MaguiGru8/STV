<% content_for :page_title do %>
  <%= @kommunity.name %> | <%= @event.name %> | Mark Attendance
<% end %>

<section id="auto-attendance">
  <div class="card text-center col-md-8 offset-md-2">
    <div class="card-header p-1">
      <%= @kommunity.name %>
    </div>
    <div class="card-body">
      <h5 class="card-title mb-0"><%= @event.name %></h5>
      <%= render 'events/event_time_display.html.erb', event: @event %>
      <%= form_with url: mark_attendance_event_entry_passes_path(event: @event), id: 'mark-attendance-form', method: :patch, remote: true do |f| %>

      <div class="form-group col-md-8 offset-md-2">
        <%= f.label :unique_code %>
        <%= f.number_field :unique_code, id: 'unique-code-input', required: true, class: 'form-control text-center' %>

      </div>
      <div class="form-group">
        <%= f.submit "Submit", class: 'btn btn-info' %>
      </div>
      <p class="card-text mt-3">Please Enter Your Unique Code To Mark Attendance</p>

      <% end %>
    </div>
  </div>
  <script>
//      $('#mark-attendance-form input[type=number]').triggerHandler('prompt');
      $(document).ready(function() {
          $('#mark-attendance-form input[type=number]').click(function(e){

              setTimeout(function(){ $('#mark-attendance-form input[type=number]')[0].focus()}, 100);
              console.log('clicked');
          });

          $('#mark-attendance-form input[type=number]').trigger('click');
      });

  </script>
</section>